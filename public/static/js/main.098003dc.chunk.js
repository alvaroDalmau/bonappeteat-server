(this["webpackJsonpbonappeteat-client"]=this["webpackJsonpbonappeteat-client"]||[]).push([[0],{46:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(23),o=n.n(s),c=(n(46),n(15)),i=n(2),l=n(3),u=n(5),h=n(4),j=n(6),d=n(8),p=n.n(d),g="https://bonappeteat.herokuapp.com",b=(n(65),n(13)),O=n.p+"static/media/logo-bonAppeteat.0b754076.png",m=n(0),f=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loggedInUser,n=e.onLogOut;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsxs)("a",{href:"/",children:[Object(m.jsx)("img",{alt:"logo bonappeteat",src:O}),Object(m.jsx)("p",{children:"BonAppeteat"})]}),t?Object(m.jsxs)("nav",{children:[Object(m.jsx)(b.b,{to:"/profile",children:"Profile"})," ",Object(m.jsx)(b.b,{to:"/",onClick:n,children:"Log OUT"})]}):Object(m.jsx)("nav",{children:Object(m.jsx)("a",{href:"#form",children:"Account"})})]})}}]),n}(a.Component),x=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.onSign;return Object(m.jsx)(r.a.Fragment,{children:Object(m.jsxs)("form",{id:"form",onSubmit:e,children:[Object(m.jsx)("label",{children:"Email address"}),Object(m.jsx)("input",{type:"email",name:"email"}),Object(m.jsx)("label",{children:"Password"}),Object(m.jsx)("input",{name:"password",type:"password"}),Object(m.jsx)("button",{type:"submit",children:"Submit"})]})})}}]),n}(a.Component),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.onSign;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("h1",{children:"Bon Appeteat"}),Object(m.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex ea commodi consequat. Quis aute iure reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint obcaecat cupiditat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}),Object(m.jsx)(x,{onSign:e})]})}}]),n}(a.Component),y=n(73),w=n(74),S=n(77),k=n(75),C=n(76),I=n(14),U=n.n(I);n(37);function F(e){return Object(y.a)().setView(e.center),null}var D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={position:[42,-3]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(t){e.setState({position:[t.coords.latitude,t.coords.longitude]})})):console.log("Not Available")}},{key:"render",value:function(){var e=this.props.restaurants,t=new U.a.Icon({iconUrl:"https://e7.pngegg.com/pngimages/135/341/png-clipart-la-halte-gourmande-menu-restaurant-cantina-pizza-logo-restaurant-antler-hand.png",iconSize:[68,65]});return Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{children:"Maps"}),Object(m.jsx)("div",{children:Object(m.jsxs)(w.a,{style:{width:"800px",height:"500px"},center:this.state.position,zoom:15,scrollWheelZoom:!0,children:[Object(m.jsx)(F,{center:this.state.position}),Object(m.jsx)(S.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e?e.map((function(e,n){return Object(m.jsx)(k.a,{icon:t,position:e.location,children:Object(m.jsx)(C.a,{children:Object(m.jsx)(b.b,{to:"/restaurant/".concat(e._id),children:e.name})})},n)})):Object(m.jsx)("div",{})]})})]})}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={restaurants:[],filterRestaurant:[],searchRestaurant:[],showResult:[],fetching:!0,msg:!1,message:""},e.handleSearch=function(t){var n=t.target.value.toLowerCase(),a=e.state.restaurants.filter((function(e){return e.name.toLowerCase().includes(n)}));e.setState({searchRestaurant:a},e.handleShowFilter)},e.handleFilter=function(t){var n=t.target.value;if("all"==n)e.setState({filterRestaurant:e.state.restaurants},e.handleShowFilter);else{var a=e.state.restaurants.filter((function(e){return e.category.includes(n)}));e.setState({filterRestaurant:a},e.handleShowFilter)}},e.handleShowFilter=function(){var t=[];e.state.searchRestaurant.forEach((function(n){e.state.filterRestaurant.forEach((function(e){n.name==e.name&&t.push(e)}))})),e.setState({showResult:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.get("".concat(g,"/api/restaurants")).then((function(t){e.setState({restaurants:t.data,searchRestaurant:t.data,filterRestaurant:t.data,showResult:t.data,fetching:!1},(function(){e.props.msg&&e.setState({msg:!0,message:e.props.msg},(function(){setTimeout((function(){return e.setState({msg:!1,message:""})}),4e3)}))}))})).catch((function(){console.log("Error grabing restaurants")}))}},{key:"render",value:function(){var e=this.state,t=e.restaurants,n=e.showResult,a=e.fetching,s=e.msg,o=e.message;return Object(m.jsxs)(r.a.Fragment,{children:[s?Object(m.jsx)("div",{children:o}):null,Object(m.jsx)("h1",{children:"All the restaurants"}),Object(m.jsxs)("select",{onChange:this.handleFilter,children:[Object(m.jsx)("option",{value:"all",children:"All"},t._id),t.map((function(e,t){return Object(m.jsx)("option",{value:e.category,children:e.category},t)}))]}),Object(m.jsx)("input",{onChange:this.handleSearch,type:"text",placeholder:"Enter the name"}),a?Object(m.jsx)("div",{className:"spinner-grow text-info",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(D,{restaurants:n}),n.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[" ",e.category]}),Object(m.jsx)("img",{src:e.images[0]}),Object(m.jsx)(b.b,{to:"/restaurant/".concat(e._id),children:e.name}),Object(m.jsxs)("div",{children:[" ",e.location]})]},t)}))]})]})}}]),n}(a.Component),R=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loggedInUser,n=e.onSign;return Object(m.jsx)(r.a.Fragment,{children:t?Object(m.jsx)(A,{msg:this.props.location.message}):Object(m.jsx)(v,{onSign:n})})}}]),n}(a.Component),P=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={restaurant:{},bookings:[],position:[],timeValue:""},e.handleCreateBooking=function(t){t.preventDefault();var n=e.props.match.params.restaurantId;e.setState({timeValue:t.target.time.value},(function(){p.a.post("".concat(g,"/api/").concat(n,"/create"),{date:t.target.date.value,time:e.state.timeValue,pax:t.target.pax.value},{withCredentials:!0}).then((function(t){e.setState({bookings:[t.data],msg:"A booking has been created"},(function(){e.props.history.push({pathname:"/",message:e.state.msg})}))})).catch((function(e){console.log("Bookings creation failed",e)}))}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.restaurantId;p.a.get("".concat(g,"/api/restaurant/").concat(t)).then((function(t){e.setState({restaurant:t.data,fetching:!1,position:t.data.location})})).catch((function(){console.log("error getting restaurant details")}))}},{key:"render",value:function(){var e=this.state,t=e.restaurant,n=e.position;if(!this.props.loggedInUser)return Object(m.jsx)(j.a,{to:"/"});var a=new U.a.Icon({iconUrl:"https://lh3.googleusercontent.com/proxy/jsFMaNyp7f09WiCZ9pJfw6BFzo_5L08P5NGpVdrTS9f8uMZi4kptF7Zb1GET5XWvR86XIlZ96SBNTm2PtmbYoYdN4W-RySJ7Fo3PA-TgWXuFvjI2N-han9K0dW7IAC9cXg",iconSize:[68,65]});return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("h1",{children:t.name}),Object(m.jsx)("div",{children:t.description}),t.images?t.images.map((function(e,t){return Object(m.jsx)("img",{src:e,alt:"restaurant image"},t)})):Object(m.jsx)("div",{}),n.length>0?Object(m.jsxs)(w.a,{style:{width:"500px",height:"300px"},center:n,zoom:13,scrollWheelZoom:!0,children:[Object(m.jsx)(S.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(m.jsx)(k.a,{icon:a,position:n,children:Object(m.jsx)(C.a,{children:t.name})})]}):Object(m.jsx)("div",{}),Object(m.jsxs)("form",{onSubmit:this.handleCreateBooking,children:[Object(m.jsx)("label",{children:"Choose the day:"}),Object(m.jsx)("input",{type:"date",name:"date"}),Object(m.jsx)("br",{}),Object(m.jsxs)("label",{children:["Hour:",Object(m.jsxs)("select",{name:"time",children:[Object(m.jsx)("option",{}),Object(m.jsx)("option",{disabled:"disabled",children:"---Lunch---"}),Object(m.jsx)("option",{children:"12:30-13:30"}),Object(m.jsx)("option",{children:"13:30-14:30"}),Object(m.jsx)("option",{children:"14:30-15:30"}),Object(m.jsx)("option",{disabled:"disabled",children:"---Dinner---"}),Object(m.jsx)("option",{children:"19:30-20:30"}),Object(m.jsx)("option",{children:"20:30-21:30"}),Object(m.jsx)("option",{children:"21:30-22:30"})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("label",{children:"Pax:"}),Object(m.jsx)("input",{name:"pax",type:"number",placeholder:"pax",min:"0",max:"10"}),Object(m.jsx)("br",{}),Object(m.jsx)("button",{type:"submit",children:"Create your Booking"})]})]})}}]),n}(a.Component),E=Object(j.g)(P),L=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loggedInUser:e.props.loggedInUser,password:""},e.handlePasswordChange=function(t){t.preventDefault();var n=t.target.value;e.setState({password:n})},e.handleImageChange=function(t){t.preventDefault();var n=t.target.image.files[0];console.log(n);var a=new FormData;a.append("image",n),console.log(a),p.a.post("".concat(g,"/api/uploadprofile"),a,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.changeImg(t.data)}))})).catch((function(e){console.log("Failing uploading img profile")}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.changeUser,n=e.deleteUser,a=this.state.loggedInUser;return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("img",{src:a.image}),Object(m.jsx)("button",{children:"Edit your profile details"}),Object(m.jsxs)("form",{onSubmit:this.handleImageChange,encType:"multipart/form-data",children:[Object(m.jsx)("input",{type:"file",name:"image",accept:"image/png, image/jpg"}),Object(m.jsx)("button",{children:"Submit"})]}),Object(m.jsxs)("form",{onSubmit:t,children:[Object(m.jsx)("label",{children:"Email:"}),Object(m.jsx)("input",{name:"email",type:"email",defaultValue:a.email}),Object(m.jsx)("label",{children:"Password:"}),Object(m.jsx)("input",{onChange:this.handlePasswordChange,name:"password",type:"password",placeholder:"****",value:this.state.password}),Object(m.jsx)("button",{type:"submit",children:"Apply changes"})]}),Object(m.jsx)("button",{children:"Your bookings"}),Object(m.jsx)("button",{onClick:n,children:"Delete Account"})]})}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={bookings:[],fetching:!0},e.changeDate=function(e){return e.replace("T"," ").slice(0,16)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.get("".concat(g,"/api/bookings"),{withCredentials:!0}).then((function(t){e.setState({bookings:t.data,fetching:!1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.bookings;return fetching?Object(m.jsx)("div",{className:"spinner-grow text-info",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(m.jsx)(r.a.Fragment,{children:t.map((function(t,n){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h4",{children:["Restaurant:",t.restaurant.name]}),Object(m.jsxs)("h4",{children:["Date:",e.changeDate(t.dateTime)]}),Object(m.jsxs)("h4",{children:["People:",t.pax]})]},n)}))})}}]),n}(a.Component),M=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loggedInUser,n=e.bookings,a=e.changeUser,s=e.deleteUser,o=e.changeImg;return t?Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(L,Object(c.a)({changeImg:o,loggedInUser:t,changeUser:a,deleteUser:s},this.props)),Object(m.jsx)(N,{bookings:n})]}):Object(m.jsx)(j.a,{to:"/"})}}]),n}(a.Component),T=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)("h1",{children:"404"}),Object(m.jsxs)("h2",{children:["Do you know what Pokemons and this page have in common?",Object(m.jsx)("br",{}),"They do not exist"]})]})}}]),n}(a.Component),z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={loggedInUser:null,fetching:!0},e.handleSign=function(t){t.preventDefault();var n={email:t.target.email.value,password:t.target.password.value};p.a.post("".concat(g,"/api/user/log"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/")}))})).catch((function(e){console.log("Error signing")}))},e.handleLogOut=function(){p.a.post("".concat(g,"/api/logout"),{},{withCredentials:!0}).then((function(t){e.setState({loggedInUser:null})})).catch((function(e){console.log("Failing loging out")}))},e.handleChange=function(t){t.preventDefault();var n={email:t.target.email.value,password:t.target.password.value};console.log(n),p.a.patch("".concat(g,"/api/user"),n,{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data},(function(){e.props.history.push("/profile")}))})).catch((function(e){console.log("Error changing profile details")}))},e.handleImgProfile=function(t){e.setState({loggedInUser:t})},e.handleDelete=function(){p.a.delete("".concat(g,"/api/user"),{withCredentials:!0}).then((function(){e.setState({loggedInUser:null},(function(){e.props.history.push("/")}))})).catch((function(){console.log("Failed deleting user profile")}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.loggedInUser||p.a.get("".concat(g,"/api/user"),{withCredentials:!0}).then((function(t){e.setState({loggedInUser:t.data,fetching:!1})})).catch((function(){console.log("Error grabing data from user session"),e.setState({fetching:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.loggedInUser,a=t.bookings;return t.fetching?Object(m.jsx)("div",{className:"spinner-grow text-info",role:"status",children:Object(m.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(f,{loggedInUser:n,onLogOut:this.handleLogOut}),Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",render:function(t){return Object(m.jsx)(R,Object(c.a)({onSign:e.handleSign,loggedInUser:n},t))}}),Object(m.jsx)(j.b,{path:"/profile",render:function(t){return Object(m.jsx)(M,Object(c.a)({changeImg:e.handleImgProfile,loggedInUser:n,bookings:a,changeUser:e.handleChange,deleteUser:e.handleDelete},t))}}),Object(m.jsx)(j.b,{path:"/restaurant/:restaurantId",render:function(e){return Object(m.jsx)(E,Object(c.a)({loggedInUser:n},e))}}),Object(m.jsx)(j.b,{component:T})]})]})}}]),n}(a.Component),B=Object(j.g)(z);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(b.a,{children:Object(m.jsx)(B,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.098003dc.chunk.js.map